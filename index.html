<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Weather forecast – Slagnäs</title>

<style>
:root{
  --pad:24px;
  --card:rgba(0,0,0,.62);
  --radius:16px;
}

html,body{
  height:100%;
  margin:0;
  background:#000;
  overflow:hidden;
  font-family:system-ui,Segoe UI,Roboto,Arial;
  color:#fff;
}

/* MAP */
#map{
  position:fixed;
  inset:0;
  width:100%;
  height:100%;
  border:0;
}

/* TOP TITLE */
#pageTitle{
  position: fixed;
  top: var(--pad);
  left: var(--pad);        /* linjerar med HUD */
  background: var(--card);
  padding: 14px 28px;
  border-radius: 18px;
  font-size: 36px;         /* större rubrik */
  font-weight: 800;
  letter-spacing: .5px;
  z-index: 30;
  backdrop-filter: blur(6px);
}

/* LOGOS */
#customerLogo{
  position:fixed;
  top:var(--pad);
  right:var(--pad);
  height:90px;
  z-index:30;
}
#logo{
  position:fixed;
  bottom:var(--pad);
  right:var(--pad);
  height:160px;
  z-index:20;
}

/* HUD */
#hud{
  position:fixed;
  left:var(--pad);
  top:110px;
  background:var(--card);
  padding:18px 22px;
  border-radius:var(--radius);
  min-width:560px;
  max-width:60vw;
  backdrop-filter:blur(6px);
}

#rowTop{
  display:flex;
  justify-content:space-between;
}
#place{font-size:30px;margin:0;}
#time{font-size:34px;font-weight:700;}
#date{font-size:18px;opacity:.9;}

#nowRow{
  display:flex;
  align-items:center;
  gap:18px;
  margin-top:14px;
}
#nowIcon svg{width:90px;height:90px;}
#nowTemp{font-size:104px;font-weight:800;}

#desc{font-size:22px;margin-top:6px;}

/* FORECAST BOXES */
#widgets{
  display:flex;
  gap:16px;
  margin-top:18px;
}
.box{
  background:rgba(255,255,255,.12);
  border-radius:14px;
  padding:16px 18px;
  min-width:220px;
}
.label{font-size:18px;font-weight:700;margin-bottom:8px;}
.row{
  display:flex;
  align-items:center;
  gap:12px;
}
.row svg{width:56px;height:56px;}
.temp{font-size:38px;font-weight:800;}
.text{font-size:16px;opacity:.9;margin-top:6px;}
</style>
</head>

<body>

<!-- MAP -->
<iframe id="map"
src="https://www.openstreetmap.org/export/embed.html?bbox=18.071651458740238,65.59402020365266,18.255243301391605,65.63388794503243&layer=mapnik&marker=65.611,18.756">
</iframe>

<!-- TITLE -->
<div id="pageTitle">Weather forecast</div>

<!-- LOGOS -->
<img id="customerLogo" src="customer_logo.png" alt="Customer logo">
<img id="logo" src="logo.png" alt="Logo">

<!-- HUD -->
<section id="hud">
  <div id="rowTop">
    <h1 id="place">Slagnäs</h1>
    <div>
      <div id="time">--:--</div>
      <div id="date">----</div>
    </div>
  </div>

  <div id="nowRow">
    <div id="nowIcon"></div>
    <div id="nowTemp">--°C</div>
  </div>

  <div id="desc">Loading weather…</div>

  <div id="widgets">
    <div class="box">
      <div class="label">Now</div>
      <div class="row">
        <div id="iNow"></div>
        <div id="tNow" class="temp"></div>
      </div>
      <div id="dNow" class="text"></div>
    </div>

    <div class="box">
      <div class="label">In 3 hours</div>
      <div class="row">
        <div id="i3"></div>
        <div id="t3" class="temp"></div>
      </div>
      <div id="d3" class="text"></div>
    </div>

    <div class="box">
      <div class="label">Tomorrow</div>
      <div class="row">
        <div id="iT"></div>
        <div id="tT" class="temp"></div>
      </div>
      <div id="dT" class="text"></div>
    </div>
  </div>
</section>

<script>
const LAT=65.611, LON=18.756;
const API=`https://api.open-meteo.com/v1/forecast?latitude=${LAT}&longitude=${LON}&current=temperature_2m,weather_code,wind_speed_10m&hourly=temperature_2m,weather_code&daily=temperature_2m_max,temperature_2m_min,weather_code&timezone=auto&wind_speed_unit=ms`;

function icon(code,size=64){
  const sun=`<circle cx="32" cy="32" r="14"/><g stroke="white" stroke-width="4"><line x1="32" y1="4" x2="32" y2="14"/><line x1="32" y1="50" x2="32" y2="60"/></g>`;
  const cloud=`<path d="M20 46h26a12 12 0 0 0 0-24 16 16 0 0 0-31-4A10 10 0 0 0 20 46z"/>`;
  const rain=cloud+`<line x1="24" y1="48" x2="20" y2="60"/><line x1="36" y1="48" x2="32" y2="60"/>`;
  const snow=cloud+`<text x="22" y="60">*</text><text x="36" y="60">*</text>`;
  let body=sun;
  if([1,2,3].includes(code)) body=cloud;
  if([51,53,55,61,63,65,80,81,82].includes(code)) body=rain;
  if([71,73,75,77,85,86].includes(code)) body=snow;
  return `<svg viewBox="0 0 64 64" width="${size}" height="${size}" fill="white">${body}</svg>`;
}

function clock(){
  const n=new Date();
  time.textContent=n.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"});
  date.textContent=n.toLocaleDateString("en-GB",{weekday:"long",year:"numeric",month:"long",day:"numeric"});
}

async function load(){
  const d=await fetch(API).then(r=>r.json());

  nowIcon.innerHTML=icon(d.current.weather_code,90);
  nowTemp.textContent=Math.round(d.current.temperature_2m)+"°C";
  desc.textContent=`Wind ${Math.round(d.current.wind_speed_10m)} m/s`;

  iNow.innerHTML=icon(d.current.weather_code,56);
  tNow.textContent=Math.round(d.current.temperature_2m)+"°C";
  dNow.textContent="Now";

  i3.innerHTML=icon(d.hourly.weather_code[3],56);
  t3.textContent=Math.round(d.hourly.temperature_2m[3])+"°C";
  d3.textContent="In 3 hours";

  iT.innerHTML=icon(d.daily.weather_code[1],56);
  tT.textContent=Math.round(d.daily.temperature_2m_min[1])+"–"+Math.round(d.daily.temperature_2m_max[1])+"°C";
  dT.textContent="Tomorrow";
}

clock(); setInterval(clock,1000);
load(); setInterval(load,600000);
</script>

</body>
</html>
